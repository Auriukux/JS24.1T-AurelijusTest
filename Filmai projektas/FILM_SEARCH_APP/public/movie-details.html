<!DOCTYPE html>
<html lang="lt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Filmų detalių</title>
    <link rel="stylesheet" href="./css/movies_details-stylesheet.css" />
  </head>
  <body>
    <div id="movie-details" class="container"></div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        const imdbID = urlParams.get("id");
        if (imdbID) {
          fetchMovieDetails(imdbID);
        }
      });

      async function fetchMovieDetails(imdbID) {
        const apiKey = "95b24de3";
        const response = await fetch(
          `http://www.omdbapi.com/?apikey=${apiKey}&i=${imdbID}`
        );
        const movie = await response.json();
        displayMovieDetails(movie);
      }

      function displayMovieDetails(movie) {
        if (movie.Response === "True") {
          document.getElementById("movie-details").innerHTML = `
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <img src="${movie.Poster}" class="img-fluid" alt="${movie.Title} Poster">
                        </div>
                        <div class="col-md-8">
                            <h2>${movie.Title}</h2>
                            <p><strong>Plot:</strong> ${movie.Plot}</p>
                            <p><strong>Director:</strong> ${movie.Director}</p>
                            <p><strong>Actors:</strong> ${movie.Actors}</p>
                            <p><strong>IMDb Rating:</strong> ${movie.imdbRating}</p>
                            <button class="btn btn-info" onclick="window.close();">Uždėti</button>
                        </div>
                    </div>
                `;
        }
      }
    </script>
  </body>
</html>
